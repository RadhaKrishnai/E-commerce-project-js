<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop & Cart</title>
    <link rel="stylesheet" href="../MAIN PAGE/FINAL HOME PAGE.css">
    <style>
        /* General Reset */
        body {
    font-family: Arial, sans-serif;
   
}
.logo{
    font-size: 25px;
    color: #000;
}

.navbar {
position: sticky;
top: 0px;
margin: 0; 
display: flex;
align-items: center;
justify-content: space-between; 
background-color: #f4f4f4;
padding: 0 20px; 
height: 60px;
width: 1240px;
margin-top: -10px;
margin-left: -9px;

}



a{
color: #555;
text-decoration: none;
transition: color 0.3s ease;
}

.headings2{
color: #666;

}
.headings :hover{
color: black;
transition: color 0.3s ease;

}

.headings, .headings2 {
display: flex;
list-style: none;
margin: 0;
padding: 0;
gap: 15px; 
align-items: center;
}
#login:hover{
color: white;
}

#login, #register, #cart {
border: 1px solid #000; /* Adjust border for better visibility */
border-radius: 5px;
color: #000;
width:90px;
height: 30px;
display: flex;
margin-right:5px;
margin-left:-22px;
justify-content: center; /* Center text and icons */
align-items: center;
background-color: transparent; /* Ensure default background is transparent */
transition: background-color 0.3s ease, border-color 0.3s ease;
cursor: pointer; /* Indicate interactivity */
}

#login:hover, #register:hover, #cart:hover {
background-color: #ddd7d7;
color: white;

}

#login svg, #register svg, #cart svg {
margin-right: 5px; 
fill: white; 
}

#login:hover svg, #register:hover svg, #cart:hover svg {
fill: #fff; 
}

/* Responsive Design */

.natureimg{
border-radius:9px;
margin-left: 10px;
width: 1220px;
height:350px;
}
.register-container h2{
    font-weight: normal;
    text-align: center;
    margin-bottom: 20px;
    color: #333;
    font-size:30px;
}



.cart-link {
display: flex;
align-items: center;
text-decoration: none;
color: #000;
gap: 5px;
}

.cart_amount {
font-size: 14px;

}

.cart-link:hover .carticon {
fill: black; 
}

.cart-link:hover .cart_amount {

}



/* Vertically align the cart text */


.cart_amount {
color:rgb(97, 95, 95);
font-size: 16px;
margin-left: 5px; /* Add spacing between icon and text */
}

.categories {
display: flex;
justify-content: center;
gap: 10px;
margin: 20px 0;
}

.categories button {
    border: solid 0.5px black;
    padding: 10px 15px;
    color: black;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 30px;
    align-content: center;
    text-align: center;
}

#shopping_cart {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
}

.product, .cart_item {
    border: 1px solid #ddd;
    padding: 15px;
    border-radius: 5px;
    text-align: center;
    
}
img {
    padding: 20px;
    margin-top: 30px;
    width:150px;
    height:150px;
    
    }
.product a{
width: 100px; 
max-width: 100px; 
height: 700px; 
object-fit: contain; 
margin: 0 auto; 
display: block; 
padding: 10px;
border-radius: 5px; 
}





.cart-page {
    padding: 20px;
}

.cart-summary {
    margin-top: 20px;
    font-weight: bold;
}

.quantity-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
}

.quantity-controls button {
    padding: 5px 10px;
   
    color: black;
    background-color: white;
    border: none;
    border-radius: 3px;
    cursor: pointer;
}

.quantity-controls button:hover {
    background-color: white;
}

.cart-container {
    display: flex;
    gap: 20px;
    justify-content: space-between;
}

.cart-summary {
    flex: 1;
    border: 1px solid #ddd;
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    background-color: #f9f9f9;
}

.cart-items {
    flex: 2;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.cart_item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid #ddd;
    padding: 15px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    background-color: #fff;
}

.headings {
    display: flex;
    gap: 20px;
    margin-left: 350px;
}
.headings2{
    display: flex;
    gap: 20px;
margin-left:230px;
}


/* if cart is empty */
/* if cart is empty */

.carttitle{
        font-size: 30px;
        margin-left:600px ;  
    }
    .hr1{
        margin-top: -20px;
        margin-left:30px;
        width:1200px;
    }
    .section{
        background-color: rgb(240, 241, 241);
        margin-left: 80px;
        border-radius: 2px;
        width: 1100px;
        height: 250px;

    }
    .emptycart{
        padding:90px;
        font-size: 30px;
        text-align: center;
        color: #666;
        
    
    }
    .arrow{
        width:15px;
        text-align: center;
        
        
    }
    .Continue-Shopping{
        border: solid 0.8px;
        width: 200px;
        height:33px;
        border-radius: 5px;
        text-align: center;
        align-content: center;
        margin-top: -90px;
        margin-left: 450px;
        
    }
    .textline{
        text-decoration: none;
        color: #666;
    }
    .emptycartdiv{
        margin-top:0px;

    }

    .by{
        text-decoration: none;
        margin-top:110px;
        margin-left: 420px;
    }
    .rk{
        color: black;
    }
    .itemlist{
        margin-top: -30px;
        margin-left: -800px;
        font-size: 25px;
        font-weight: normal;
       
        
        
    }
  
    .itemhr{
        width:773px;
        margin-top: -20px;
        margin-left: -815px;
        font-size: 25px;
        font-weight: normal;
        
        
        
    }
    .summary{
        font-weight: bold;
        font-size: 20px;
        margin-top: -20px;
    }
    .order-summary{
        margin-top: -30px;
    }



    .checkboxbutton{
        margin-left: 110px;
        height: 35px;
        width: 150px;
        color: white;
        background-color: #000;
        border: none;
        border-radius: 5px;
    }

    .Detailbutton{
        background-color: #000;
        color: white;
        border: none;
        height: 30px;
        width: 70px;
        border-radius: 5px;
    }
    .cartbutton{
        background-color: #000;
        color: white;
        border: none;
        height: 30px;
        width: 100px;
        border-radius: 5px;
    }

        
    </style>
</head>
<body>
    <div class="navbar">
        <a href="#" class="logo">Ecommerce</a>
        <ul class="headings">
            <li><a href="../MAIN PAGE/home page js.html">Home</a></li>
            <li><a href="../MAIN PAGE/all products.html">Products</a></li>
            <li><a href="../MAIN PAGE/about.html">About</a></li>
            <li><a href="../MAIN PAGE/contact us page.html">Contact</a></li>
        </ul>
        <ul class="headings2">
            <li id="login"><a href="../MAIN PAGE/login form.html">
                <svg xmlns="http://www.w3.org/2000/svg" class="loginicon" viewBox="0 0 512 512" width="15" height="15">
                    <path fill="#000000" d="M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/>
                </svg>
                Login
            </a></li>
            <li id="register">
                <a href="../MAIN PAGE/register form.html">
                    <svg xmlns="http://www.w3.org/2000/svg" class="registericon" viewBox="0 0 640 512" width="15" height="15">
                        <path fill="#000000" d="M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3zM504 312l0-64-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-64c0-13.3 10.7-24 24-24s24 10.7 24 24l0 64 64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0 0 64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"/>
                    </svg >Register</a>
            </li>
            <li id="cart">
                <a href="../MAIN PAGE/FINAL CART PAGE.html" onclick="showCartPage()" class="cart-link">
                    <svg xmlns="http://www.w3.org/2000/svg" class="carticon" viewBox="0 0 576 512" width="15" height="15">
                        <path fill="#000000" d="M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"/>
                    </svg>
                    <div class="cart">
                        <span id="cart-count" class="cart_amount">Cart(0)</span>
                    </div>
                </a>
            </li>
            
        </ul>
    </div>
   

   
    

    <!-- Shop Page -->
     
    <div id="shop-page" class="shop-page">
        <img class="natureimg" src="../images/nature.png" alt="nature ">
        <div class="register-container">
            <h2>Latest Products</h2>
            <hr>
            </div>
        <div class="categories">
            <button onclick="fetchProducts()">All</button>
            <button onclick="filterProducts('men\'s clothing')">Men's Clothing</button>
            <button onclick="filterProducts('women\'s clothing')">Women's Clothing</button>
            <button onclick="filterProducts('electronics')">Electronics</button>
            <button onclick="filterProducts('jewelery')">Jewelry</button>
        </div>
        <div id="shopping_cart"></div>
    </div>

    <!-- Cart Page -->
    <p class="carttitle">Cart</p>
    <hr class="hr1">
    
    
    <div id="cart-page" class="cart-page" style="display: none;">
        <div class="cart-container">
            <div id="cart-items" class="cart-items"></div>
            
            <div class="cart-summary">
                <p class="itemlist">Items List</p>
                <hr class="itemhr">
                <div class="order-summary">
                <h1 class="summary">Order Summary</h1>
                <hr class="summaryhr">
                <p id="product-total"></p>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<p>Shipping: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $30.00</p>
                <p id="total-amount"></p>
                <button onclick="gotocheckOut()" class="checkboxbutton">Go to Checkout</button>

            </div>
            </div>
        </div>
    </div>
    

    <script>
        let basket = JSON.parse(localStorage.getItem('data')) || [];
        const SHIPPING_FEE = 30;

        async function fetchProducts() {
            try {
                const response = await fetch('https://fakestoreapi.com/products');
                const products = await response.json();
                displayProducts(products);
                localStorage.setItem('allProducts', JSON.stringify(products));
            } catch (error) {
                document.getElementById('shopping_cart').innerHTML = "<p>Failed to load products. Please try again later.</p>";
                console.error('Error fetching products:', error);
            }
        }

        function displayProducts(products) {
    const shoppingCart = document.getElementById('shopping_cart');
    shoppingCart.innerHTML = products
        .map(
            (product) =>
            `<div class="product">
                <img src="${product.image}" alt="${product.title}">
                <h3>${product.title.substring(0,50)}...</h3>
                <p>${product.description.substring(0,70)}...</p>
                <p><strong>$${product.price}</strong></p>
                <button onclick="addToCart(${product.id}, '${product.title}', ${product.price}, '${product.image}')" class="Detailbutton">Details</button>
                <button onclick="addToCart(${product.id}, '${product.title}', ${product.price}, '${product.image}')" class="cartbutton">Add to Cart</button>
            </div>`
        )
        .join('');
}


        function filterProducts(category) {
            const allProducts = JSON.parse(localStorage.getItem('allProducts')) || [];
            const filteredProducts = allProducts.filter((product) => product.category === category);
            displayProducts(filteredProducts);
        }

        function addToCart(id, name, price, img) {
            const existingItem = basket.find((item) => item.id === id);
            if (!existingItem) {
                basket.push({ id, name, price, img, item: 1 });
            } else {
                existingItem.item += 1;
            }
            localStorage.setItem('data', JSON.stringify(basket));
            calculate();
        }

        function displayCartItems() {
            const cartItems = document.getElementById('cart-items');
            const productTotalElement = document.getElementById('product-total');
            const totalAmountElement = document.getElementById('total-amount');
            const cartSummary = document.querySelector('.cart-summary');
            const checkoutButton = document.querySelector('button[onclick="gotocheckOut()"]');

            if (basket.length === 0) {
                cartItems.innerHTML = ` 

    <div class="section">
       <p class="emptycart">Your Cart is Empty</p>

        <p class="Continue-Shopping"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="arrow"><a href="../MAIN PAGE/home page js.html"><path fill="#0d0d0d" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg><a href="../MAIN PAGE/home page js.html" class="textline">Continue Shopping</a></a></p>
        <p class="by">Made With ❤️ by <a href="#" class="rk" ><span>Radha Krishna Yadu</span></a></p>
    </div>
`
                productTotalElement.style.display = 'none';
                totalAmountElement.style.display = 'none';
                cartSummary.style.display = 'none';
                checkoutButton.style.display = 'none';
                return;
            }

            cartItems.innerHTML = basket
                .map(
                    (item) =>
                    `<div class="cart_item">
                        <img src="${item.img}" alt="${item.name}">
                        <p>${item.name}</p>
                        <p>Price: $${item.price}</p>
                        <div class="quantity-controls">
                            <button onclick="decrementQuantity(${item.id})">-</button>
                            <span>${item.item}</span>
                            <button onclick="incrementQuantity(${item.id})">+</button>
                        </div>
                    </div>`
                )
                .join('');

            const productTotal = basket.reduce((sum, item) => sum + item.price * item.item, 0);
            const grandTotal = productTotal + SHIPPING_FEE;

            productTotalElement.style.display = 'block';
            productTotalElement.innerHTML = `Products(0):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $${productTotal.toFixed(2)}`;
            totalAmountElement.style.display = 'block';
            totalAmountElement.innerHTML = `Total amount:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $${grandTotal.toFixed(2)}`;
            cartSummary.style.display = 'block';
            checkoutButton.style.display = 'block';
        }

        function incrementQuantity(id) {
            const product = basket.find((item) => item.id === id);
            if (product) {
                product.item += 1;
            }
            localStorage.setItem('data', JSON.stringify(basket));
            displayCartItems();
        }

        function decrementQuantity(id) {
            const product = basket.find((item) => item.id === id);
            if (product && product.item > 1) {
                product.item -= 1;
            } else {
                basket = basket.filter((item) => item.id !== id);
            }
            localStorage.setItem('data', JSON.stringify(basket));
            displayCartItems();
            calculate();
        }

        function calculate() {
            const cartCount = basket.reduce((sum, item) => sum + item.item, 0);
            document.getElementById('cart-count').textContent = `Cart(${cartCount})`;
        }

        function showShopPage() {
            document.getElementById('shop-page').style.display = 'block';
            document.getElementById('cart-page').style.display = 'none';
        }

        function showCartPage() {
            document.getElementById('shop-page').style.display = 'none';
            document.getElementById('cart-page').style.display = 'block';
            displayCartItems();
        }

        calculate();
        fetchProducts();
    </script>
</body>
</html>
